function CDV(e) { var t = document.createElement("div"); t.id = "m20D", t.style.display = "none", t.appendChild(e), c.indexOf("&pagetype=checkout") > 0 || c.indexOf("&pagetype=basket") > 0 ? document.body.appendChild(t) : setTimeout(function () { document.body.appendChild(t) }, 6e3) } function CIF(e) { (e.indexOf("tomtop") > 0 || e.indexOf("rosegal") > 0) && (e = e.replace("solocpm", "mndtrk")); var t = document.createElement("iframe"); t.id = "m20F", t.marginWidth = 0, t.marginHeight = 0, t.frameBorder = 0, t.scrolling = "no", t.allowTransparency = !0, t.width = 0, t.height = 0, t.style.position = "absolute", t.style.bottom = "0px", t.style.overflowX = "hidden", t.style.overflowY = "hidden", t.style.width = "0px", t.style.height = "0px", t.style.display = "none", t.src = e + "&t=4", CDV(t) } function CST(e) { (e.indexOf("tomtop") > 0 || e.indexOf("rosegal") > 0) && (e = e.replace("solocpm", "mndtrk")); var t = document.createElement("script"); t.id = "m20F", t.type = "text/javascript", t.src = e + "&t=1", CDV(t) } function CIG(e) { (e.indexOf("tomtop") > 0 || e.indexOf("rosegal") > 0) && (e = e.replace("solocpm", "mndtrk")); var t = document.createElement("img"); t.id = "m20F", t.width = 1, t.height = 1, t.src = e + "&t=2", CDV(t) } function stripHTML(e) { var t = /<\S[^><]*>/g; for (i = 0; i < arguments.length; i++) { var p = e.replace(t, "").substring(0, 600); p = p.replace("@", "AtA"); p = p.replace("email", "em:"); p = p.replace("e-mail", "em:"); return p.replace("%40", "AtA"); } } function getParm() { var e = ""; if ("undefined" != typeof rtgsettings) for (var t in rtgsettings) rtgsettings.hasOwnProperty(t) && ("" != rtgsettings[t] && "undefined" != rtgsettings[t] && null != rtgsettings[t] && rtgsettings[t] != Object && (e += "&" + t.toLowerCase() + "=" + encodeURIComponent(stripHTML(rtgsettings[t].toString().toLowerCase()))), "token" == t.toLowerCase() && (tok = rtgsettings[t].toString().toLowerCase())); return e } function TrafficCalculator() { var e = ""; if (e = "https:" == document.location.protocol ? "https://secureaud.solocpm.com/v2/DirectNewRtg.aspx?rnd=" + (new Date).getYear() + (new Date).getMonth() + (new Date).getDate() : "https://secureaud.solocpm.com/v2/DirectNewRtg.aspx?rnd=" + (new Date).getYear() + (new Date).getMonth() + (new Date).getDate(), document.URL && "" != document.URL) { t = getParm().replace("%24pdt_url%24", encodeURIComponent(document.URL)); c = t } else { var t = getParm(); c = t } if (t.indexOf("&layer=image") > 0) { CIG(e + t) } else if (t.indexOf("&layer=script") > 0) { CST(e + t) } else { CIF(e + t) } if (t.indexOf("pagetype=basket") > 0) { CAU("https://clk.solocpm.com/audit.aspx?token=" + tok); } else if ((t.indexOf("pagetype=checkout") > 0) && (t.indexOf("rosegal") > 0 || t.indexOf("zaful_glb") > 0)) { CAU("https://clk.solocpm.com/audit.aspx?token=" + tok); } else if (t.indexOf("pagetype=checkout") > 0 && t.indexOf("dresslily") > 0) { CAU("https://clk.solocpm.com/audit.aspx?token=" + tok); } else if (t.indexOf("pagetype=product") > 0 || t.indexOf("pagetype=searchresult") > 0) { CAU("https://clk.solocpm.com/audit.aspx?token=" + tok + "&pagetype=product"); } } function CAU(e) { (e.indexOf("tomtop") > 0 || e.indexOf("rosegal") > 0) && (e = e.replace("solocpm", "mndtrk")); var t = document.createElement("script"); t.id = "mrybs", t.type = "text/javascript", t.src = e, document.head.appendChild(t) } function checkDuplicateScript(e) { for (var t = document.getElementsByTagName("script"), r = {}, n = t.length, a = 0; a < n; a++) { var o = t[a].id ? t[a].id : "undefined"; "undefined" != o && o == e && (isNaN(r[o]) && (r[o] = 0), r[o]++) } return r[e] ? r[e] : 1 } var tok = "", c = ""; TrafficCalculator();